{"ast":null,"code":"const COURSES_API_URL = 'http://localhost:5001'; // AI LMS Backend\nconst SCHOOLS_API_URL = 'http://localhost:5000'; // MongoDB Analytics Backend\nconst API_BASE = 'http://localhost:5000/api';\nclass ApiService {\n  // ========== AUTHENTICATION (Port 5001) ==========\n  static async register(userData) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/api/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('Registration error:', error);\n      return {\n        success: false,\n        error: 'Connection failed'\n      };\n    }\n  }\n  static async login(credentials) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/api/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('Login error:', error);\n      return {\n        success: false,\n        error: 'Connection failed'\n      };\n    }\n  }\n\n  // ========== COURSES (Port 5001) ==========\n  static async getCourses() {\n    try {\n      // âŒ WRONG: Uses Port 5001 (AI server doesn't have courses)\n      const response = await fetch(`${COURSES_API_URL}/api/ai`);\n      const data = await response.json();\n      return data.success ? data.data || data.courses : [];\n    } catch (error) {\n      console.error('Error fetching courses:', error);\n      return [];\n    }\n  }\n  static async getCourseById(id) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/courses/${id}`);\n      const data = await response.json();\n      return data.success ? data.data : null;\n    } catch (error) {\n      console.error('Error fetching course:', error);\n      return null;\n    }\n  }\n  static async enrollCourse(userId, courseId) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/enroll`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          courseId\n        })\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('Error enrolling:', error);\n      return {\n        success: false,\n        error: 'Enrollment failed'\n      };\n    }\n  }\n\n  // ========== AI & CHATBOT (Port 5001) ==========\n  // Get AI recommendations\n  static async getAiRecommendations(interest, level) {\n    try {\n      const response = await fetch('http://localhost:5001/api/ai/recommend', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          interest: interest,\n          level: level,\n          context: 'course_recommendation'\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        return {\n          message: data.message || 'AI Recommendations',\n          recommendations: data.recommendations || [],\n          courses: data.courses || []\n        };\n      } else {\n        throw new Error(data.error || 'Failed to get recommendations');\n      }\n    } catch (error) {\n      console.error('AI Recommendation error:', error);\n      // Return fallback recommendations\n      return this.getFallbackRecommendations(interest, level);\n    }\n  }\n\n  // Fallback recommendations when AI is unavailable\n  static getFallbackRecommendations(interest, level) {\n    const allCourses = [{\n      id: '1',\n      title: 'Python Programming',\n      description: 'Learn Python programming from scratch',\n      category: 'Programming',\n      level: 'Beginner',\n      instructor: 'John Smith',\n      duration: '7 weeks',\n      rating: 4.5\n    }, {\n      id: '2',\n      title: 'Web Development Fundamentals',\n      description: 'Learn HTML, CSS, and JavaScript to build modern websites',\n      category: 'Web Development',\n      level: 'Beginner',\n      instructor: 'Sarah Johnson',\n      duration: '6 weeks',\n      rating: 4.7\n    }, {\n      id: '3',\n      title: 'Data Science with Python',\n      description: 'Introduction to data science, analysis, and visualization',\n      category: 'Data Science',\n      level: 'Intermediate',\n      instructor: 'Michael Chen',\n      duration: '8 weeks',\n      rating: 4.7\n    }, {\n      id: '4',\n      title: 'React for Beginners',\n      description: 'Learn React.js to build modern web applications',\n      category: 'Web Development',\n      level: 'Beginner',\n      instructor: 'Emma Wilson',\n      duration: '6 weeks',\n      rating: 4.7\n    }, {\n      id: '5',\n      title: 'Machine Learning Fundamentals',\n      description: 'Introduction to AI and machine learning concepts',\n      category: 'AI/ML',\n      level: 'Intermediate',\n      instructor: 'Dr. AI Expert',\n      duration: '10 weeks',\n      rating: 4.6\n    }];\n    const filteredCourses = allCourses.filter(course => {\n      const interestLower = interest.toLowerCase();\n      const matchesInterest = course.title.toLowerCase().includes(interestLower) || course.description.toLowerCase().includes(interestLower) || course.category.toLowerCase().includes(interestLower);\n      const matchesLevel = course.level.toLowerCase() === level.toLowerCase();\n      return matchesInterest && matchesLevel;\n    });\n    return {\n      message: `Found ${filteredCourses.length} courses for \"${interest}\" at ${level} level`,\n      recommendations: filteredCourses,\n      courses: filteredCourses\n    };\n  }\n\n  // AI Chat - USE PORT 5001 for AI\n  static async sendChatMessage(message) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/api/hybrid-ai/chat`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message\n        })\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('AI Chat error:', error);\n      return {\n        success: false,\n        response: \"I'm having connection issues. Please try again.\",\n        provider: 'error'\n      };\n    }\n  }\n\n  // Add this method if you need it (but check if you already have similar methods)\n  static async getDashboardStats() {\n    return await ApiService.getStats(); // Use your existing method\n  }\n\n  // And if you need a simple health check:\n  static async checkHealth() {\n    return await ApiService.checkAnalyticsBackend();\n  }\n  static async getAiProviders() {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/api/hybrid-ai/providers`);\n      return await response.json();\n    } catch (error) {\n      console.error('AI Providers error:', error);\n      return {\n        success: false,\n        available: []\n      };\n    }\n  }\n\n  // ========== ANALYTICS & SEARCH (Port 5000) ==========\n  static async getStats() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/stats`);\n      return await response.json(); // Returns { success: true, data: { ... } }\n    } catch (error) {\n      console.error('Stats error:', error);\n      return {\n        success: false,\n        data: {\n          users: 0,\n          courses: 0,\n          enrollments: 0\n        }\n      };\n    }\n  }\n  static async getAnalyticsSummary() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/analytics/summary`, {\n        mode: 'cors',\n        // Add this\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      });\n      const data = await response.json();\n      console.log('Analytics summary response:', data);\n      return data;\n    } catch (error) {\n      console.error('Analytics error:', error);\n      return {\n        success: false,\n        data: {\n          totals: {\n            users: 0,\n            courses: 0,\n            enrollments: 0\n          }\n        }\n      };\n    }\n  }\n  static async getAnalyticsDashboard() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/analytics/dashboard`);\n      return await response.json();\n    } catch (error) {\n      console.error('Dashboard error:', error);\n      return {\n        success: false,\n        data: {\n          totals: {\n            users: 0,\n            courses: 0,\n            enrollments: 0\n          }\n        }\n      };\n    }\n  }\n\n  // ========== SEARCH (Port 5000) - CORRECTED ==========\n  static async searchCourses(query) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/search/courses?q=${encodeURIComponent(query)}`);\n      return await response.json();\n    } catch (error) {\n      console.error('Search error:', error);\n      return {\n        success: false,\n        query,\n        results: [],\n        count: 0\n      };\n    }\n  }\n  static async getSearchHealth() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/search/health`);\n      return await response.json();\n    } catch (error) {\n      console.error('Search health error:', error);\n      return {\n        success: false,\n        status: 'unavailable'\n      };\n    }\n  }\n\n  // ========== USERS & ENROLLMENTS (Port 5000) ==========\n  static async getUsers() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/users`);\n      return await response.json();\n    } catch (error) {\n      console.error('Users error:', error);\n      return {\n        success: false,\n        data: [],\n        count: 0\n      };\n    }\n  }\n  static async getUserEnrollments(userId) {\n    try {\n      // First, get all enrollments\n      const response = await fetch(`${SCHOOLS_API_URL}/api/enrollments`);\n      const data = await response.json();\n      console.log('All enrollments fetched:', data);\n      if (data.success && Array.isArray(data.data)) {\n        // Filter enrollments by userId\n        const userEnrollments = data.data.filter(enrollment => enrollment.userId === userId);\n        console.log(`Filtered enrollments for user ${userId}:`, userEnrollments);\n        return {\n          success: true,\n          data: userEnrollments,\n          count: userEnrollments.length\n        };\n      }\n      return {\n        success: false,\n        data: [],\n        count: 0\n      };\n    } catch (error) {\n      console.error('User enrollments error:', error);\n      return {\n        success: false,\n        data: [],\n        count: 0\n      };\n    }\n  }\n  static async getUserStats(userId) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/users/${userId}/stats`);\n      return await response.json();\n    } catch (error) {\n      console.error('User stats error:', error);\n      return {\n        success: false,\n        data: {}\n      };\n    }\n  }\n  static async getEnrollments() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/enrollments`);\n      return await response.json();\n    } catch (error) {\n      console.error('Enrollments error:', error);\n      return {\n        success: false,\n        data: [],\n        count: 0\n      };\n    }\n  }\n\n  // ========== COURSES DETAILS (Port 5000) ==========\n  static async getCoursesFromAnalytics() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/courses`);\n      const data = await response.json();\n      console.log('Courses from analytics:', data);\n      if (data.success) {\n        return {\n          success: true,\n          data: data.data || [],\n          count: data.count || 0\n        };\n      }\n      return {\n        success: false,\n        data: [],\n        count: 0\n      };\n    } catch (error) {\n      console.error('Courses error:', error);\n      return {\n        success: false,\n        data: [],\n        count: 0\n      };\n    }\n  }\n  static async getCourseDetails(courseId) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/courses/${courseId}`);\n      return await response.json();\n    } catch (error) {\n      console.error('Course details error:', error);\n      return {\n        success: false,\n        data: null\n      };\n    }\n  }\n  static async getCourseEnrollmentStats(courseId) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/courses/${courseId}/enrollments`);\n      return await response.json();\n    } catch (error) {\n      console.error('Course stats error:', error);\n      return {\n        success: false,\n        data: {}\n      };\n    }\n  }\n\n  // // ========== SCHOOLS (Port 5000) ==========\n  // static async getSchools() {\n  //   try {\n  //     const response = await fetch(`${SCHOOLS_API_URL}/api/schools`);\n  //     const data = await response.json();\n  //     return data.success ? data.data : [];\n  //   } catch (error) {\n  //     console.error('Error fetching schools:', error);\n  //     return [];\n  //   }\n  // }\n\n  // ========== HEALTH CHECKS ==========\n  static async checkCoursesBackend() {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/health`);\n      return await response.json();\n    } catch (error) {\n      return {\n        success: false,\n        status: 'unavailable'\n      };\n    }\n  }\n  static async checkAnalyticsBackend() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/health`);\n      return await response.json();\n    } catch (error) {\n      return {\n        success: false,\n        status: 'unavailable'\n      };\n    }\n  }\n\n  // ========== TEST CONNECTIONS ==========\n  static async testConnections() {\n    const results = {};\n\n    // Test Port 5001 (AI Backend)\n    try {\n      const response = await fetch(`${COURSES_API_URL}/`);\n      results.coursesBackend = response.ok;\n    } catch {\n      results.coursesBackend = false;\n    }\n\n    // Test Port 5000 (Analytics Backend)\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/`);\n      results.analyticsBackend = response.ok;\n    } catch {\n      results.analyticsBackend = false;\n    }\n    return results;\n  }\n\n  // ========== MOCK DATA (Fallbacks) ==========\n  static getMockUserCourses() {\n    return {\n      success: true,\n      data: [{\n        id: 1,\n        name: 'Python Programming',\n        progress: 75,\n        enrolledDate: '2024-01-15'\n      }, {\n        id: 2,\n        name: 'Web Development',\n        progress: 45,\n        enrolledDate: '2024-02-01'\n      }, {\n        id: 3,\n        name: 'Data Science Basics',\n        progress: 20,\n        enrolledDate: '2024-02-10'\n      }]\n    };\n  }\n\n  // ========== SCHOOLS (Port 5000) ==========\n  static async getSchools() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/schools`);\n      const data = await response.json();\n      return data.success ? data.data : [];\n    } catch (error) {\n      console.error('Error fetching schools:', error);\n      return [];\n    }\n  }\n\n  // ADD THIS METHOD:\n  static async addSchool(schoolData) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/schools`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(schoolData)\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('Error adding school:', error);\n      return {\n        success: false,\n        error: 'Failed to add school'\n      };\n    }\n  }\n\n  // Also add these if you need them:\n  static async updateSchool(id, schoolData) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/schools/${id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(schoolData)\n      });\n\n      // ðŸ”’ HARDENING\n      if (!response.ok) {\n        const text = await response.text();\n        throw new Error(text);\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error updating school:', error.message);\n      return {\n        success: false,\n        error: error.message || 'Failed to update school'\n      };\n    }\n  }\n  static async deleteSchool(id) {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/schools/${id}`, {\n        method: 'DELETE'\n      });\n      return await response.json();\n    } catch (error) {\n      console.error('Error deleting school:', error);\n      return {\n        success: false,\n        error: 'Failed to delete school'\n      };\n    }\n  }\n}\nexport default ApiService;","map":{"version":3,"names":["COURSES_API_URL","SCHOOLS_API_URL","API_BASE","ApiService","register","userData","response","fetch","method","headers","body","JSON","stringify","json","error","console","success","login","credentials","getCourses","data","courses","getCourseById","id","enrollCourse","userId","courseId","getAiRecommendations","interest","level","context","message","recommendations","Error","getFallbackRecommendations","allCourses","title","description","category","instructor","duration","rating","filteredCourses","filter","course","interestLower","toLowerCase","matchesInterest","includes","matchesLevel","length","sendChatMessage","provider","getDashboardStats","getStats","checkHealth","checkAnalyticsBackend","getAiProviders","available","users","enrollments","getAnalyticsSummary","mode","log","totals","getAnalyticsDashboard","searchCourses","query","encodeURIComponent","results","count","getSearchHealth","status","getUsers","getUserEnrollments","Array","isArray","userEnrollments","enrollment","getUserStats","getEnrollments","getCoursesFromAnalytics","getCourseDetails","getCourseEnrollmentStats","checkCoursesBackend","testConnections","coursesBackend","ok","analyticsBackend","getMockUserCourses","name","progress","enrolledDate","getSchools","addSchool","schoolData","updateSchool","text","deleteSchool"],"sources":["D:/capstone-2025/qw-capstone-project/capstone-project-sk/s1-frontend/react-app/src/services/api.js"],"sourcesContent":["const COURSES_API_URL = 'http://localhost:5001';  // AI LMS Backend\r\nconst SCHOOLS_API_URL = 'http://localhost:5000';  // MongoDB Analytics Backend\r\nconst API_BASE = 'http://localhost:5000/api';\r\nclass ApiService {\r\n  // ========== AUTHENTICATION (Port 5001) ==========\r\n  static async register(userData) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/api/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(userData)\r\n      });\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Registration error:', error);\r\n      return { success: false, error: 'Connection failed' };\r\n    }\r\n  }\r\n\r\n  static async login(credentials) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/api/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(credentials)\r\n      });\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return { success: false, error: 'Connection failed' };\r\n    }\r\n  }\r\n\r\n  // ========== COURSES (Port 5001) ==========\r\nstatic async getCourses() {\r\n  try {\r\n    // âŒ WRONG: Uses Port 5001 (AI server doesn't have courses)\r\n    const response = await fetch(`${COURSES_API_URL}/api/ai`);\r\n    const data = await response.json();\r\n    return data.success ? data.data || data.courses : [];\r\n  } catch (error) {\r\n    console.error('Error fetching courses:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n  static async getCourseById(id) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/courses/${id}`);\r\n      const data = await response.json();\r\n      return data.success ? data.data : null;\r\n    } catch (error) {\r\n      console.error('Error fetching course:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static async enrollCourse(userId, courseId) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/enroll`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId, courseId })\r\n      });\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Error enrolling:', error);\r\n      return { success: false, error: 'Enrollment failed' };\r\n    }\r\n  }\r\n\r\n  // ========== AI & CHATBOT (Port 5001) ==========\r\n// Get AI recommendations\r\nstatic async getAiRecommendations(interest, level) {\r\n  try {\r\n    const response = await fetch('http://localhost:5001/api/ai/recommend', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({\r\n        interest: interest,\r\n        level: level,\r\n        context: 'course_recommendation'\r\n      })\r\n    });\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (data.success) {\r\n      return {\r\n        message: data.message || 'AI Recommendations',\r\n        recommendations: data.recommendations || [],\r\n        courses: data.courses || []\r\n      };\r\n    } else {\r\n      throw new Error(data.error || 'Failed to get recommendations');\r\n    }\r\n  } catch (error) {\r\n    console.error('AI Recommendation error:', error);\r\n    // Return fallback recommendations\r\n    return this.getFallbackRecommendations(interest, level);\r\n  }\r\n}\r\n\r\n// Fallback recommendations when AI is unavailable\r\nstatic getFallbackRecommendations(interest, level) {\r\n  const allCourses = [\r\n    {\r\n      id: '1',\r\n      title: 'Python Programming',\r\n      description: 'Learn Python programming from scratch',\r\n      category: 'Programming',\r\n      level: 'Beginner',\r\n      instructor: 'John Smith',\r\n      duration: '7 weeks',\r\n      rating: 4.5\r\n    },\r\n    {\r\n      id: '2',\r\n      title: 'Web Development Fundamentals',\r\n      description: 'Learn HTML, CSS, and JavaScript to build modern websites',\r\n      category: 'Web Development',\r\n      level: 'Beginner',\r\n      instructor: 'Sarah Johnson',\r\n      duration: '6 weeks',\r\n      rating: 4.7\r\n    },\r\n    {\r\n      id: '3',\r\n      title: 'Data Science with Python',\r\n      description: 'Introduction to data science, analysis, and visualization',\r\n      category: 'Data Science',\r\n      level: 'Intermediate',\r\n      instructor: 'Michael Chen',\r\n      duration: '8 weeks',\r\n      rating: 4.7\r\n    },\r\n    {\r\n      id: '4',\r\n      title: 'React for Beginners',\r\n      description: 'Learn React.js to build modern web applications',\r\n      category: 'Web Development',\r\n      level: 'Beginner',\r\n      instructor: 'Emma Wilson',\r\n      duration: '6 weeks',\r\n      rating: 4.7\r\n    },\r\n    {\r\n      id: '5',\r\n      title: 'Machine Learning Fundamentals',\r\n      description: 'Introduction to AI and machine learning concepts',\r\n      category: 'AI/ML',\r\n      level: 'Intermediate',\r\n      instructor: 'Dr. AI Expert',\r\n      duration: '10 weeks',\r\n      rating: 4.6\r\n    }\r\n  ];\r\n\r\n  const filteredCourses = allCourses.filter(course => {\r\n    const interestLower = interest.toLowerCase();\r\n    const matchesInterest = \r\n      course.title.toLowerCase().includes(interestLower) ||\r\n      course.description.toLowerCase().includes(interestLower) ||\r\n      course.category.toLowerCase().includes(interestLower);\r\n    \r\n    const matchesLevel = course.level.toLowerCase() === level.toLowerCase();\r\n    \r\n    return matchesInterest && matchesLevel;\r\n  });\r\n\r\n  return {\r\n    message: `Found ${filteredCourses.length} courses for \"${interest}\" at ${level} level`,\r\n    recommendations: filteredCourses,\r\n    courses: filteredCourses\r\n  };\r\n}\r\n\r\n\r\n  // AI Chat - USE PORT 5001 for AI\r\n  static async sendChatMessage(message) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/api/hybrid-ai/chat`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ message })\r\n      });\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('AI Chat error:', error);\r\n      return { \r\n        success: false, \r\n        response: \"I'm having connection issues. Please try again.\",\r\n        provider: 'error'\r\n      };\r\n    }\r\n  }\r\n\r\n// Add this method if you need it (but check if you already have similar methods)\r\nstatic async getDashboardStats() {\r\n  return await ApiService.getStats(); // Use your existing method\r\n}\r\n\r\n// And if you need a simple health check:\r\nstatic async checkHealth() {\r\n  return await ApiService.checkAnalyticsBackend();\r\n}\r\n\r\n  static async getAiProviders() {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/api/hybrid-ai/providers`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('AI Providers error:', error);\r\n      return { success: false, available: [] };\r\n    }\r\n  }\r\n\r\n  // ========== ANALYTICS & SEARCH (Port 5000) ==========\r\nstatic async getStats() {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/stats`);\r\n    return await response.json(); // Returns { success: true, data: { ... } }\r\n  } catch (error) {\r\n    console.error('Stats error:', error);\r\n    return { success: false, data: { users: 0, courses: 0, enrollments: 0 } };\r\n  }\r\n}\r\n\r\nstatic async getAnalyticsSummary() {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/analytics/summary`, {\r\n      mode: 'cors', // Add this\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      }\r\n    });\r\n    const data = await response.json();\r\n    console.log('Analytics summary response:', data);\r\n    return data;\r\n  } catch (error) {\r\n    console.error('Analytics error:', error);\r\n    return { success: false, data: { totals: { users: 0, courses: 0, enrollments: 0 } } };\r\n  }\r\n}\r\n\r\n  static async getAnalyticsDashboard() {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/analytics/dashboard`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Dashboard error:', error);\r\n      return { success: false, data: { totals: { users: 0, courses: 0, enrollments: 0 } } };\r\n    }\r\n  }\r\n\r\n  // ========== SEARCH (Port 5000) - CORRECTED ==========\r\n  static async searchCourses(query) {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/search/courses?q=${encodeURIComponent(query)}`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Search error:', error);\r\n      return { success: false, query, results: [], count: 0 };\r\n    }\r\n  }\r\n\r\n  static async getSearchHealth() {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/search/health`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Search health error:', error);\r\n      return { success: false, status: 'unavailable' };\r\n    }\r\n  }\r\n\r\n  // ========== USERS & ENROLLMENTS (Port 5000) ==========\r\n  static async getUsers() {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/users`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Users error:', error);\r\n      return { success: false, data: [], count: 0 };\r\n    }\r\n  }\r\n\r\nstatic async getUserEnrollments(userId) {\r\n  try {\r\n    // First, get all enrollments\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/enrollments`);\r\n    const data = await response.json();\r\n    \r\n    console.log('All enrollments fetched:', data);\r\n    \r\n    if (data.success && Array.isArray(data.data)) {\r\n      // Filter enrollments by userId\r\n      const userEnrollments = data.data.filter(enrollment => enrollment.userId === userId);\r\n      \r\n      console.log(`Filtered enrollments for user ${userId}:`, userEnrollments);\r\n      \r\n      return {\r\n        success: true,\r\n        data: userEnrollments,\r\n        count: userEnrollments.length\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('User enrollments error:', error);\r\n    return { success: false, data: [], count: 0 };\r\n  }\r\n}\r\n\r\n\r\n  static async getUserStats(userId) {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/users/${userId}/stats`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('User stats error:', error);\r\n      return { success: false, data: {} };\r\n    }\r\n  }\r\n\r\n  static async getEnrollments() {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/enrollments`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Enrollments error:', error);\r\n      return { success: false, data: [], count: 0 };\r\n    }\r\n  }\r\n\r\n  // ========== COURSES DETAILS (Port 5000) ==========\r\nstatic async getCoursesFromAnalytics() {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/courses`);\r\n    const data = await response.json();\r\n    \r\n    console.log('Courses from analytics:', data);\r\n    \r\n    if (data.success) {\r\n      return {\r\n        success: true,\r\n        data: data.data || [],\r\n        count: data.count || 0\r\n      };\r\n    }\r\n    \r\n    return { success: false, data: [], count: 0 };\r\n  } catch (error) {\r\n    console.error('Courses error:', error);\r\n    return { success: false, data: [], count: 0 };\r\n  }\r\n}\r\n\r\n  static async getCourseDetails(courseId) {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/courses/${courseId}`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Course details error:', error);\r\n      return { success: false, data: null };\r\n    }\r\n  }\r\n\r\n  static async getCourseEnrollmentStats(courseId) {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/courses/${courseId}/enrollments`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Course stats error:', error);\r\n      return { success: false, data: {} };\r\n    }\r\n  }\r\n\r\n  // // ========== SCHOOLS (Port 5000) ==========\r\n  // static async getSchools() {\r\n  //   try {\r\n  //     const response = await fetch(`${SCHOOLS_API_URL}/api/schools`);\r\n  //     const data = await response.json();\r\n  //     return data.success ? data.data : [];\r\n  //   } catch (error) {\r\n  //     console.error('Error fetching schools:', error);\r\n  //     return [];\r\n  //   }\r\n  // }\r\n\r\n  // ========== HEALTH CHECKS ==========\r\n  static async checkCoursesBackend() {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/health`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      return { success: false, status: 'unavailable' };\r\n    }\r\n  }\r\n\r\n  static async checkAnalyticsBackend() {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/health`);\r\n      return await response.json();\r\n    } catch (error) {\r\n      return { success: false, status: 'unavailable' };\r\n    }\r\n  }\r\n\r\n  // ========== TEST CONNECTIONS ==========\r\n  static async testConnections() {\r\n    const results = {};\r\n    \r\n    // Test Port 5001 (AI Backend)\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/`);\r\n      results.coursesBackend = response.ok;\r\n    } catch {\r\n      results.coursesBackend = false;\r\n    }\r\n    \r\n    // Test Port 5000 (Analytics Backend)\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/`);\r\n      results.analyticsBackend = response.ok;\r\n    } catch {\r\n      results.analyticsBackend = false;\r\n    }\r\n    \r\n    return results;\r\n  }\r\n\r\n  // ========== MOCK DATA (Fallbacks) ==========\r\n  static getMockUserCourses() {\r\n    return {\r\n      success: true,\r\n      data: [\r\n        { id: 1, name: 'Python Programming', progress: 75, enrolledDate: '2024-01-15' },\r\n        { id: 2, name: 'Web Development', progress: 45, enrolledDate: '2024-02-01' },\r\n        { id: 3, name: 'Data Science Basics', progress: 20, enrolledDate: '2024-02-10' }\r\n      ]\r\n    };\r\n  }\r\n\r\n// ========== SCHOOLS (Port 5000) ==========\r\nstatic async getSchools() {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/schools`);\r\n    const data = await response.json();\r\n    return data.success ? data.data : [];\r\n  } catch (error) {\r\n    console.error('Error fetching schools:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n// ADD THIS METHOD:\r\nstatic async addSchool(schoolData) {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/schools`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(schoolData)\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error adding school:', error);\r\n    return { success: false, error: 'Failed to add school' };\r\n  }\r\n}\r\n\r\n// Also add these if you need them:\r\nstatic async updateSchool(id, schoolData) {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/schools/${id}`, {\r\n      method: 'PUT',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(schoolData)\r\n    });\r\n\r\n    // ðŸ”’ HARDENING\r\n    if (!response.ok) {\r\n      const text = await response.text();\r\n      throw new Error(text);\r\n    }\r\n\r\n    return await response.json();\r\n\r\n  } catch (error) {\r\n    console.error('Error updating school:', error.message);\r\n    return {\r\n      success: false,\r\n      error: error.message || 'Failed to update school'\r\n    };\r\n  }\r\n}\r\n\r\n\r\nstatic async deleteSchool(id) {\r\n  try {\r\n    const response = await fetch(`${SCHOOLS_API_URL}/api/schools/${id}`, {\r\n      method: 'DELETE'\r\n    });\r\n    return await response.json();\r\n  } catch (error) {\r\n    console.error('Error deleting school:', error);\r\n    return { success: false, error: 'Failed to delete school' };\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport default ApiService;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}