{"ast":null,"code":"var _jsxFileName = \"D:\\\\capstone-2025\\\\qw-capstone-project\\\\capstone-project-sk\\\\s1-frontend\\\\react-app\\\\src\\\\components\\\\AIChatbot.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport ApiService from '../services/api'; // Add this import\nimport './AIChatbot.css'; // We'll create this CSS\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AIChatbot = () => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [conversationStarters, setConversationStarters] = useState([]);\n  const [searchResults, setSearchResults] = useState([]); // NEW: For search results\n  const [searchHints, setSearchHints] = useState([]); // NEW: For search hints\n  const [chatHistory, setChatHistory] = useState([]);\n  const [userId] = useState(`user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`);\n  const [aiProvider, setAiProvider] = useState('auto');\n  const messagesEndRef = useRef(null);\n  const chatContainerRef = useRef(null);\n\n  // Initial greeting\n  const initialMessages = [{\n    id: 1,\n    text: \"Hello! I'm your AI Learning Assistant. I can help you find courses, explain concepts, and guide your learning journey. How can I help you today?\",\n    sender: 'bot',\n    timestamp: new Date(),\n    type: 'greeting',\n    provider: 'ai'\n  }];\n\n  // Initialize\n  useEffect(() => {\n    setMessages(initialMessages);\n    fetchConversationStarters();\n    loadChatHistory();\n    fetchSearchHints();\n  }, []);\n\n  // Scroll to bottom\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages, searchResults]);\n\n  // Fetch conversation starters\n  const fetchConversationStarters = async () => {\n    try {\n      // Default starters\n      setConversationStarters([\"What courses do you have?\", \"Explain web development\", \"How do I become a data scientist?\", \"Recommend beginner courses\", \"What is React?\", \"Tell me about Python programming\", \"Help me with machine learning\", \"Search for JavaScript courses\", \"Find data science courses\"]);\n    } catch (error) {\n      console.error('Failed to fetch starters:', error);\n    }\n  };\n\n  // Fetch search hints from courses\n  const fetchSearchHints = async () => {\n    try {\n      const coursesResponse = await ApiService.getCoursesFromAnalytics();\n      if (coursesResponse.success && Array.isArray(coursesResponse.data)) {\n        // Extract course titles and categories for search hints\n        const hints = coursesResponse.data.map(course => course.title).slice(0, 5); // Top 5 course titles as hints\n\n        setSearchHints(hints);\n      }\n    } catch (error) {\n      console.error('Failed to fetch search hints:', error);\n    }\n  };\n\n  // Perform search when user asks about courses\n  const performSearch = async query => {\n    try {\n      console.log('ðŸ” Searching for:', query);\n\n      // Search courses from analytics backend\n      const searchResponse = await ApiService.searchCourses(query);\n      console.log('Search response:', searchResponse);\n      if (searchResponse.success && Array.isArray(searchResponse.results)) {\n        setSearchResults(searchResponse.results.slice(0, 5)); // Top 5 results\n\n        // Format search results for display\n        const formattedResults = searchResponse.results.map((course, index) => ({\n          id: course._id || index,\n          title: course.title,\n          description: course.description,\n          category: course.category,\n          level: course.level,\n          instructor: course.instructor,\n          rating: course.rating,\n          enrolledStudents: course.enrolledStudents\n        }));\n        return formattedResults;\n      } else {\n        // Fallback: Search in local courses\n        const coursesResponse = await ApiService.getCoursesFromAnalytics();\n        if (coursesResponse.success && Array.isArray(coursesResponse.data)) {\n          const courses = coursesResponse.data;\n          const filtered = courses.filter(course => course.title.toLowerCase().includes(query.toLowerCase()) || course.description.toLowerCase().includes(query.toLowerCase()) || course.category.toLowerCase().includes(query.toLowerCase()));\n          setSearchResults(filtered.slice(0, 5));\n          return filtered.slice(0, 5);\n        }\n      }\n      return [];\n    } catch (error) {\n      console.error('Search error:', error);\n      return [];\n    }\n  };\n\n  // Load chat history\n  const loadChatHistory = async () => {\n    try {\n      const savedHistory = localStorage.getItem(`chat_history_${userId}`);\n      if (savedHistory) {\n        const history = JSON.parse(savedHistory);\n        setChatHistory(history.slice(-10));\n      }\n    } catch (error) {\n      console.error('Failed to load history:', error);\n    }\n  };\n\n  // Save chat message\n  const saveChatMessage = async (message, response, provider) => {\n    try {\n      const chatEntry = {\n        userId,\n        message,\n        response,\n        provider,\n        timestamp: new Date().toISOString()\n      };\n      const existing = JSON.parse(localStorage.getItem(`chat_history_${userId}`) || '[]');\n      existing.push(chatEntry);\n      localStorage.setItem(`chat_history_${userId}`, JSON.stringify(existing.slice(-50)));\n      setChatHistory(prev => [...prev, chatEntry].slice(-10));\n    } catch (error) {\n      console.error('Failed to save chat:', error);\n    }\n  };\n\n  // Enhanced send message with search capabilities\n  const sendMessage = async (messageText = input) => {\n    if (!messageText.trim() || isLoading) return;\n    const userMessage = {\n      id: Date.now(),\n      text: messageText,\n      sender: 'user',\n      timestamp: new Date(),\n      provider: 'user'\n    };\n    setMessages(prev => [...prev, userMessage]);\n    setInput('');\n    setIsLoading(true);\n    setSearchResults([]); // Clear previous search results\n\n    // Check if message contains search keywords\n    const isSearchQuery = messageText.toLowerCase().includes('search') || messageText.toLowerCase().includes('find') || messageText.toLowerCase().includes('look for') || messageText.toLowerCase().includes('course about') || messageText.toLowerCase().includes('courses for') || messageText.toLowerCase().includes('learn');\n    try {\n      if (isSearchQuery) {\n        // Extract search query\n        const searchQuery = messageText.replace(/search|find|look for|courses? for|learn|about/gi, '').trim();\n\n        // Get search results first\n        const searchResults = await performSearch(searchQuery || messageText);\n\n        // Then send to AI\n        const aiResponse = await sendToAI(messageText, searchResults);\n\n        // Add AI response\n        const botMessage = {\n          id: Date.now() + 1,\n          text: aiResponse.text,\n          sender: 'bot',\n          timestamp: new Date(),\n          type: 'ai_response',\n          provider: aiResponse.provider || 'ai',\n          suggestions: aiResponse.suggestions || [],\n          hasSearchResults: searchResults.length > 0\n        };\n        setMessages(prev => [...prev, botMessage]);\n        saveChatMessage(messageText, aiResponse.text, aiResponse.provider || 'ai');\n      } else {\n        // Regular AI chat\n        const aiResponse = await sendToAI(messageText);\n        const botMessage = {\n          id: Date.now() + 1,\n          text: aiResponse.text,\n          sender: 'bot',\n          timestamp: new Date(),\n          type: 'ai_response',\n          provider: aiResponse.provider || 'ai',\n          suggestions: aiResponse.suggestions || []\n        };\n        setMessages(prev => [...prev, botMessage]);\n        saveChatMessage(messageText, aiResponse.text, aiResponse.provider || 'ai');\n      }\n    } catch (error) {\n      console.error('âŒ Chat error:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        text: \"I apologize, but I'm having trouble connecting to the chatbot service. Please make sure the MongoDB backend is running on port 5000.\",\n        // Changed from 5001 to 5000\n        sender: 'bot',\n        timestamp: new Date(),\n        type: 'error',\n        provider: 'error'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Send message to AI backend\n  const sendToAI = async (messageText, searchResults = []) => {\n    try {\n      console.log(`ðŸ“¤ Sending to AI Backend: ${messageText} (provider: ${aiProvider})`);\n      const response = await fetch('http://localhost:5001/api/ai/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        },\n        body: JSON.stringify({\n          message: messageText,\n          provider: aiProvider,\n          // Pass the selected provider\n          context: {\n            userName: 'User',\n            userLevel: 'beginner',\n            interests: []\n          }\n        })\n      });\n      console.log('ðŸ“¡ AI Backend response status:', response.status);\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n      console.log('âœ… Raw API Response:', data);\n      if (data.success) {\n        // Check if it's still the generic greeting (just in case)\n        if (data.response.includes(\"Hello! I'm ready to help you learn\")) {\n          console.log('âš ï¸ Got generic greeting, using fallback instead');\n          return {\n            text: generateSpecificResponse(messageText),\n            provider: data.provider || 'ai',\n            suggestions: data.suggestions || generateFollowUpQuestions(messageText, searchResults),\n            data: data.data || null\n          };\n        }\n\n        // Return the actual AI response\n        return {\n          text: data.response,\n          provider: data.provider || 'ai',\n          suggestions: data.suggestions || generateFollowUpQuestions(messageText, searchResults),\n          data: data.data || null\n        };\n      } else {\n        throw new Error(data.error || 'AI chat failed');\n      }\n    } catch (error) {\n      console.error('âŒ AI call error:', error);\n      // Return fallback response\n      return {\n        text: generateSpecificResponse(messageText),\n        provider: 'error',\n        suggestions: generateFollowUpQuestions(messageText, searchResults)\n      };\n    }\n  };\n\n  // Add this helper function\n  const generateSpecificResponse = query => {\n    const lower = query.toLowerCase();\n    if (lower.includes('react')) {\n      return \"React is a JavaScript library for building user interfaces, developed by Facebook. It uses a component-based architecture and virtual DOM for efficient updates. Would you like to know more about React hooks or components?\";\n    }\n    if (lower.includes('python')) {\n      return \"Python is a versatile programming language used for web development, data science, AI, and automation. It's known for its simple syntax and large ecosystem. Are you interested in Python for web development or data science?\";\n    }\n    if (lower.includes('data science')) {\n      return \"Data science involves analyzing data to extract insights. It combines statistics, programming, and domain knowledge. The typical path includes learning Python, statistics, machine learning, and data visualization. Would you like course recommendations?\";\n    }\n    return \"I can help you with learning topics, course recommendations, and career guidance. What specific topic would you like to learn about?\";\n  };\n\n  // Generate follow-up questions based on context\n  const generateFollowUpQuestions = (query, searchResults = []) => {\n    const questions = [];\n    if (searchResults.length > 0) {\n      var _searchResults$, _searchResults$2, _searchResults$3, _searchResults$4;\n      questions.push(`Tell me more about ${((_searchResults$ = searchResults[0]) === null || _searchResults$ === void 0 ? void 0 : _searchResults$.title) || 'this course'}`, `What are the prerequisites for ${((_searchResults$2 = searchResults[0]) === null || _searchResults$2 === void 0 ? void 0 : _searchResults$2.title) || 'this course'}?`, `How do I enroll in ${((_searchResults$3 = searchResults[0]) === null || _searchResults$3 === void 0 ? void 0 : _searchResults$3.title) || 'this course'}?`, `What skills will I learn from ${((_searchResults$4 = searchResults[0]) === null || _searchResults$4 === void 0 ? void 0 : _searchResults$4.title) || 'this course'}?`);\n    } else {\n      questions.push(\"What courses do you have for beginners?\", \"Can you recommend web development courses?\", \"How do I start learning data science?\", \"What programming language should I learn first?\");\n    }\n    return questions.slice(0, 3); // Return top 3 questions\n  };\n\n  // Test AI connection\n  const testAIConnection = async () => {\n    setIsLoading(true);\n    try {\n      const testMessage = {\n        id: Date.now(),\n        text: \"Testing AI connection...\",\n        sender: 'bot',\n        timestamp: new Date(),\n        type: 'test'\n      };\n      setMessages(prev => [...prev, testMessage]);\n\n      // Test actual AI response\n      const response = await fetch('http://localhost:5001/api/ai/chat', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          message: 'Hello, are you working? Say yes if you are.',\n          provider: aiProvider\n        })\n      });\n      const data = await response.json();\n      if (data.success) {\n        const successMessage = {\n          id: Date.now() + 1,\n          text: `âœ… AI Connection Successful! Using ${data.provider || 'unknown'} provider.\\nResponse: \"${data.response}\"`,\n          sender: 'bot',\n          timestamp: new Date(),\n          type: 'success',\n          provider: data.provider || 'ai'\n        };\n        setMessages(prev => [...prev, successMessage]);\n      } else {\n        throw new Error('AI test failed');\n      }\n    } catch (error) {\n      console.error('Test failed:', error);\n      const errorMessage = {\n        id: Date.now() + 1,\n        text: \"âŒ AI Connection Failed. Please check backend logs.\",\n        sender: 'bot',\n        timestamp: new Date(),\n        type: 'error'\n      };\n      setMessages(prev => [...prev, errorMessage]);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // Handle quick starter click\n  const handleStarterClick = starter => {\n    setInput(starter);\n    setTimeout(() => {\n      sendMessage(starter);\n    }, 100);\n  };\n\n  // Handle key press\n  const handleKeyPress = e => {\n    if (e.key === 'Enter' && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage();\n    }\n  };\n\n  // Scroll to bottom\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // Clear conversation\n  const clearConversation = () => {\n    setMessages(initialMessages);\n    setSearchResults([]);\n  };\n\n  // Format time\n  const formatTime = date => {\n    return date.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Toggle chat window\n  const toggleChat = () => {\n    setIsOpen(!isOpen);\n  };\n\n  // Change AI provider\n  const changeProvider = provider => {\n    setAiProvider(provider);\n    const providerMessage = {\n      id: Date.now(),\n      text: `Switched to ${provider.toUpperCase()} AI provider`,\n      sender: 'bot',\n      timestamp: new Date(),\n      type: 'info'\n    };\n    setMessages(prev => [...prev, providerMessage]);\n  };\n\n  // Render message with formatting\n  const renderMessage = message => {\n    const isBot = message.sender === 'bot';\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message-container ${isBot ? 'bot-message' : 'user-message'}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-sender\",\n          children: isBot ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"bot-icon\",\n              children: \"\\uD83E\\uDD16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sender-name\",\n              children: [\"AI Assistant \", message.provider && message.provider !== 'ai' && `â€¢ ${message.provider.toUpperCase()}`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"user-icon\",\n              children: \"\\uD83D\\uDC64\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"sender-name\",\n              children: \"You\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-time\",\n          children: formatTime(new Date(message.timestamp))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message-bubble ${isBot ? 'bot-bubble' : 'user-bubble'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-text\",\n          children: message.text.split('\\n').map((line, i) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n            children: [line, i < message.text.split('\\n').length - 1 && /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 487,\n              columnNumber: 61\n            }, this)]\n          }, i, true, {\n            fileName: _jsxFileName,\n            lineNumber: 485,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this), isBot && message.suggestions && message.suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"message-suggestions\",\n        children: [/*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"suggestions-label\",\n          children: \"Quick follow-ups:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"suggestions-buttons\",\n          children: message.suggestions.map((suggestion, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"suggestion-btn\",\n            onClick: () => handleStarterClick(suggestion),\n            disabled: isLoading,\n            children: suggestion\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 11\n      }, this)]\n    }, message.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render search results\n  const renderSearchResults = () => {\n    if (searchResults.length === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-results-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-results-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"search-results-title\",\n          children: [\"\\uD83D\\uDD0D Search Results (\", searchResults.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 522,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n          className: \"text-muted\",\n          children: \"Courses matching your query\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-results-grid\",\n        children: searchResults.map((result, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-result-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-result-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"search-result-title\",\n              children: result.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"search-result-badge\",\n              children: result.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"search-result-description\",\n            children: result.description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-result-footer\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"search-result-meta\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"search-result-meta-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-user\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 537,\n                  columnNumber: 21\n                }, this), \" \", result.instructor]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"search-result-meta-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-graduation-cap\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 540,\n                  columnNumber: 21\n                }, this), \" \", result.level]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 539,\n                columnNumber: 19\n              }, this), result.rating && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"search-result-meta-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-star\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 544,\n                  columnNumber: 23\n                }, this), \" \", result.rating]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 543,\n                columnNumber: 21\n              }, this), result.enrolledStudents > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"search-result-meta-item\",\n                children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                  className: \"fas fa-users\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 549,\n                  columnNumber: 23\n                }, this), \" \", result.enrolledStudents]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 548,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"search-result-action-btn\",\n              onClick: () => handleStarterClick(`Tell me more about ${result.title}`),\n              children: \"Learn More\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 553,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 534,\n            columnNumber: 15\n          }, this)]\n        }, index, true, {\n          fileName: _jsxFileName,\n          lineNumber: 528,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 526,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 7\n    }, this);\n  };\n\n  // Render search hints\n  const renderSearchHints = () => {\n    if (searchHints.length === 0) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-hints-section\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"search-hints-title\",\n        children: \"\\uD83D\\uDCA1 Search for courses about:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-hints-grid\",\n        children: searchHints.map((hint, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"search-hint-card\",\n          onClick: () => handleStarterClick(`Find courses about ${hint}`),\n          disabled: isLoading,\n          children: hint\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 576,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 574,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 7\n    }, this);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"chatbot-toggle-btn\",\n      onClick: toggleChat,\n      title: \"AI Learning Assistant\",\n      children: isOpen ? /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"close-icon\",\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"chat-icon\",\n          children: \"\\uD83D\\uDCAC\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 602,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"notification-dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 603,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 7\n    }, this), isOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chatbot-window\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header-left\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-avatar\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"avatar-icon\",\n              children: \"\\uD83E\\uDD16\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 615,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 614,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"chat-info\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"chat-title\",\n              children: \"AI Learning Assistant\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 618,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"chat-status\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-dot online\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 620,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"status-text\",\n                children: [\"Connected to Port 5001 \\u2022 Provider: \", aiProvider.toUpperCase()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 621,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 619,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 617,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 613,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"chat-header-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"provider-selector\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: aiProvider,\n              onChange: e => changeProvider(e.target.value),\n              className: \"form-select form-select-sm\",\n              disabled: isLoading,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"auto\",\n                children: \"\\uD83E\\uDD16 Auto (Smart)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 635,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"openai\",\n                children: \"\\u26A1 OpenAI\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 636,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"gemini\",\n                children: \"\\uD83D\\uDD2E Gemini\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 637,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"deepseek\",\n                children: \"\\uD83C\\uDF0A DeepSeek\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 638,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 629,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 628,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"header-btn test-btn\",\n            onClick: testAIConnection,\n            title: \"Test AI Connection\",\n            disabled: isLoading,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-icon\",\n              children: \"\\uD83D\\uDD27\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 647,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 641,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"header-btn clear-btn\",\n            onClick: clearConversation,\n            title: \"Clear conversation\",\n            disabled: isLoading,\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-icon\",\n              children: \"\\uD83D\\uDDD1\\uFE0F\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 655,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 649,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"header-btn close-btn\",\n            onClick: () => setIsOpen(false),\n            title: \"Close chat\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-icon\",\n              children: \"\\u2715\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 662,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 657,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 627,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-body\",\n        ref: chatContainerRef,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"welcome-section\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"welcome-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"welcome-icon\",\n              children: \"\\uD83D\\uDC4B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 672,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"welcome-title\",\n              children: \"How can I help you today?\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 673,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"welcome-text\",\n              children: \"I'm connected to the AI backend on port 5001. Ask me about courses, programming, or learning advice!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 674,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"welcome-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-primary\",\n                onClick: testAIConnection,\n                disabled: isLoading,\n                children: isLoading ? 'Testing...' : 'Test Connection'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 678,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n                className: \"text-muted ms-2\",\n                children: [\"Current provider: \", /*#__PURE__*/_jsxDEV(\"strong\", {\n                  children: aiProvider.toUpperCase()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 686,\n                  columnNumber: 39\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 685,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 677,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 671,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 670,\n          columnNumber: 13\n        }, this), renderSearchHints(), conversationStarters.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"starters-section\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"starters-title\",\n            children: \"\\uD83D\\uDCA1 Try asking:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 698,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"starters-grid\",\n            children: conversationStarters.map((starter, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"starter-card\",\n              onClick: () => handleStarterClick(starter),\n              disabled: isLoading,\n              children: starter\n            }, index, false, {\n              fileName: _jsxFileName,\n              lineNumber: 701,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 697,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"messages-container\",\n          children: [messages.map(renderMessage), renderSearchResults(), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"typing-indicator\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"typing-dots\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 724,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 725,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dot\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 723,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"typing-text\",\n              children: [\"AI is thinking... Using \", aiProvider.toUpperCase()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 728,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 722,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: messagesEndRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 733,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 715,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 668,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chat-footer\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"input-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              className: \"chat-input\",\n              placeholder: `Ask me anything or search for courses...`,\n              value: input,\n              onChange: e => setInput(e.target.value),\n              onKeyPress: handleKeyPress,\n              disabled: isLoading,\n              rows: \"1\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 741,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-actions\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"send-btn\",\n                onClick: () => sendMessage(),\n                disabled: isLoading || !input.trim(),\n                title: \"Send message\",\n                children: isLoading ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"spinner\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 758,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"send-icon\",\n                  children: \"\\u27A4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 760,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 751,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 750,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 740,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-hints\",\n            children: [/*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"hint-text\",\n              children: [\"Press \", /*#__PURE__*/_jsxDEV(\"kbd\", {\n                children: \"Enter\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 768,\n                columnNumber: 27\n              }, this), \" to send \\u2022 Current: \", aiProvider.toUpperCase(), \" \\u2022 Port: 5001\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 767,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"search-hint\",\n              children: \"\\uD83D\\uDCA1 Try: \\\"search for web development courses\\\" or \\\"find Python courses\\\"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 770,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 610,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n_s(AIChatbot, \"G3B30XeyGQjMWJVRHeRm/CV60V8=\");\n_c = AIChatbot;\nexport default AIChatbot;\nvar _c;\n$RefreshReg$(_c, \"AIChatbot\");","map":{"version":3,"names":["React","useState","useEffect","useRef","ApiService","jsxDEV","_jsxDEV","Fragment","_Fragment","AIChatbot","_s","isOpen","setIsOpen","messages","setMessages","input","setInput","isLoading","setIsLoading","conversationStarters","setConversationStarters","searchResults","setSearchResults","searchHints","setSearchHints","chatHistory","setChatHistory","userId","Date","now","Math","random","toString","substr","aiProvider","setAiProvider","messagesEndRef","chatContainerRef","initialMessages","id","text","sender","timestamp","type","provider","fetchConversationStarters","loadChatHistory","fetchSearchHints","scrollToBottom","error","console","coursesResponse","getCoursesFromAnalytics","success","Array","isArray","data","hints","map","course","title","slice","performSearch","query","log","searchResponse","searchCourses","results","formattedResults","index","_id","description","category","level","instructor","rating","enrolledStudents","courses","filtered","filter","toLowerCase","includes","savedHistory","localStorage","getItem","history","JSON","parse","saveChatMessage","message","response","chatEntry","toISOString","existing","push","setItem","stringify","prev","sendMessage","messageText","trim","userMessage","isSearchQuery","searchQuery","replace","aiResponse","sendToAI","botMessage","suggestions","hasSearchResults","length","errorMessage","fetch","method","headers","body","context","userName","userLevel","interests","status","ok","Error","json","generateSpecificResponse","generateFollowUpQuestions","lower","questions","_searchResults$","_searchResults$2","_searchResults$3","_searchResults$4","testAIConnection","testMessage","successMessage","handleStarterClick","starter","setTimeout","handleKeyPress","e","key","shiftKey","preventDefault","_messagesEndRef$curre","current","scrollIntoView","behavior","clearConversation","formatTime","date","toLocaleTimeString","hour","minute","toggleChat","changeProvider","providerMessage","toUpperCase","renderMessage","isBot","className","children","fileName","_jsxFileName","lineNumber","columnNumber","split","line","i","suggestion","onClick","disabled","renderSearchResults","result","renderSearchHints","hint","value","onChange","target","ref","placeholder","onKeyPress","rows","_c","$RefreshReg$"],"sources":["D:/capstone-2025/qw-capstone-project/capstone-project-sk/s1-frontend/react-app/src/components/AIChatbot.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport ApiService from '../services/api'; // Add this import\r\nimport './AIChatbot.css'; // We'll create this CSS\r\n\r\nconst AIChatbot = () => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState([]);\r\n  const [input, setInput] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [conversationStarters, setConversationStarters] = useState([]);\r\n  const [searchResults, setSearchResults] = useState([]); // NEW: For search results\r\n  const [searchHints, setSearchHints] = useState([]); // NEW: For search hints\r\n  const [chatHistory, setChatHistory] = useState([]);\r\n  const [userId] = useState(`user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`);\r\n  const [aiProvider, setAiProvider] = useState('auto');\r\n  \r\n  const messagesEndRef = useRef(null);\r\n  const chatContainerRef = useRef(null);\r\n\r\n  // Initial greeting\r\n  const initialMessages = [\r\n    {\r\n      id: 1,\r\n      text: \"Hello! I'm your AI Learning Assistant. I can help you find courses, explain concepts, and guide your learning journey. How can I help you today?\",\r\n      sender: 'bot',\r\n      timestamp: new Date(),\r\n      type: 'greeting',\r\n      provider: 'ai'\r\n    }\r\n  ];\r\n\r\n  // Initialize\r\n  useEffect(() => {\r\n    setMessages(initialMessages);\r\n    fetchConversationStarters();\r\n    loadChatHistory();\r\n    fetchSearchHints();\r\n  }, []);\r\n\r\n  // Scroll to bottom\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages, searchResults]);\r\n\r\n  // Fetch conversation starters\r\n  const fetchConversationStarters = async () => {\r\n    try {\r\n      // Default starters\r\n      setConversationStarters([\r\n        \"What courses do you have?\",\r\n        \"Explain web development\",\r\n        \"How do I become a data scientist?\",\r\n        \"Recommend beginner courses\",\r\n        \"What is React?\",\r\n        \"Tell me about Python programming\",\r\n        \"Help me with machine learning\",\r\n        \"Search for JavaScript courses\",\r\n        \"Find data science courses\"\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Failed to fetch starters:', error);\r\n    }\r\n  };\r\n\r\n  // Fetch search hints from courses\r\n  const fetchSearchHints = async () => {\r\n    try {\r\n      const coursesResponse = await ApiService.getCoursesFromAnalytics();\r\n      if (coursesResponse.success && Array.isArray(coursesResponse.data)) {\r\n        // Extract course titles and categories for search hints\r\n        const hints = coursesResponse.data\r\n          .map(course => course.title)\r\n          .slice(0, 5); // Top 5 course titles as hints\r\n        \r\n        setSearchHints(hints);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to fetch search hints:', error);\r\n    }\r\n  };\r\n\r\n  // Perform search when user asks about courses\r\n  const performSearch = async (query) => {\r\n    try {\r\n      console.log('ðŸ” Searching for:', query);\r\n      \r\n      // Search courses from analytics backend\r\n      const searchResponse = await ApiService.searchCourses(query);\r\n      console.log('Search response:', searchResponse);\r\n      \r\n      if (searchResponse.success && Array.isArray(searchResponse.results)) {\r\n        setSearchResults(searchResponse.results.slice(0, 5)); // Top 5 results\r\n        \r\n        // Format search results for display\r\n        const formattedResults = searchResponse.results.map((course, index) => ({\r\n          id: course._id || index,\r\n          title: course.title,\r\n          description: course.description,\r\n          category: course.category,\r\n          level: course.level,\r\n          instructor: course.instructor,\r\n          rating: course.rating,\r\n          enrolledStudents: course.enrolledStudents\r\n        }));\r\n        \r\n        return formattedResults;\r\n      } else {\r\n        // Fallback: Search in local courses\r\n        const coursesResponse = await ApiService.getCoursesFromAnalytics();\r\n        if (coursesResponse.success && Array.isArray(coursesResponse.data)) {\r\n          const courses = coursesResponse.data;\r\n          const filtered = courses.filter(course => \r\n            course.title.toLowerCase().includes(query.toLowerCase()) ||\r\n            course.description.toLowerCase().includes(query.toLowerCase()) ||\r\n            course.category.toLowerCase().includes(query.toLowerCase())\r\n          );\r\n          \r\n          setSearchResults(filtered.slice(0, 5));\r\n          return filtered.slice(0, 5);\r\n        }\r\n      }\r\n      return [];\r\n    } catch (error) {\r\n      console.error('Search error:', error);\r\n      return [];\r\n    }\r\n  };\r\n\r\n  // Load chat history\r\n  const loadChatHistory = async () => {\r\n    try {\r\n      const savedHistory = localStorage.getItem(`chat_history_${userId}`);\r\n      if (savedHistory) {\r\n        const history = JSON.parse(savedHistory);\r\n        setChatHistory(history.slice(-10));\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load history:', error);\r\n    }\r\n  };\r\n\r\n  // Save chat message\r\n  const saveChatMessage = async (message, response, provider) => {\r\n    try {\r\n      const chatEntry = {\r\n        userId,\r\n        message,\r\n        response,\r\n        provider,\r\n        timestamp: new Date().toISOString()\r\n      };\r\n      \r\n      const existing = JSON.parse(localStorage.getItem(`chat_history_${userId}`) || '[]');\r\n      existing.push(chatEntry);\r\n      localStorage.setItem(`chat_history_${userId}`, JSON.stringify(existing.slice(-50)));\r\n      \r\n      setChatHistory(prev => [...prev, chatEntry].slice(-10));\r\n    } catch (error) {\r\n      console.error('Failed to save chat:', error);\r\n    }\r\n  };\r\n\r\n  // Enhanced send message with search capabilities\r\n  const sendMessage = async (messageText = input) => {\r\n    if (!messageText.trim() || isLoading) return;\r\n\r\n    const userMessage = {\r\n      id: Date.now(),\r\n      text: messageText,\r\n      sender: 'user',\r\n      timestamp: new Date(),\r\n      provider: 'user'\r\n    };\r\n\r\n    setMessages(prev => [...prev, userMessage]);\r\n    setInput('');\r\n    setIsLoading(true);\r\n    setSearchResults([]); // Clear previous search results\r\n\r\n    // Check if message contains search keywords\r\n    const isSearchQuery = messageText.toLowerCase().includes('search') || \r\n                         messageText.toLowerCase().includes('find') ||\r\n                         messageText.toLowerCase().includes('look for') ||\r\n                         messageText.toLowerCase().includes('course about') ||\r\n                         messageText.toLowerCase().includes('courses for') ||\r\n                         messageText.toLowerCase().includes('learn');\r\n\r\n    try {\r\n      if (isSearchQuery) {\r\n        // Extract search query\r\n        const searchQuery = messageText.replace(/search|find|look for|courses? for|learn|about/gi, '').trim();\r\n        \r\n        // Get search results first\r\n        const searchResults = await performSearch(searchQuery || messageText);\r\n        \r\n        // Then send to AI\r\n        const aiResponse = await sendToAI(messageText, searchResults);\r\n        \r\n        // Add AI response\r\n        const botMessage = {\r\n          id: Date.now() + 1,\r\n          text: aiResponse.text,\r\n          sender: 'bot',\r\n          timestamp: new Date(),\r\n          type: 'ai_response',\r\n          provider: aiResponse.provider || 'ai',\r\n          suggestions: aiResponse.suggestions || [],\r\n          hasSearchResults: searchResults.length > 0\r\n        };\r\n\r\n        setMessages(prev => [...prev, botMessage]);\r\n        saveChatMessage(messageText, aiResponse.text, aiResponse.provider || 'ai');\r\n        \r\n      } else {\r\n        // Regular AI chat\r\n        const aiResponse = await sendToAI(messageText);\r\n        \r\n        const botMessage = {\r\n          id: Date.now() + 1,\r\n          text: aiResponse.text,\r\n          sender: 'bot',\r\n          timestamp: new Date(),\r\n          type: 'ai_response',\r\n          provider: aiResponse.provider || 'ai',\r\n          suggestions: aiResponse.suggestions || []\r\n        };\r\n\r\n        setMessages(prev => [...prev, botMessage]);\r\n        saveChatMessage(messageText, aiResponse.text, aiResponse.provider || 'ai');\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('âŒ Chat error:', error);\r\n      \r\nconst errorMessage = {\r\n  id: Date.now() + 1,\r\n  text: \"I apologize, but I'm having trouble connecting to the chatbot service. Please make sure the MongoDB backend is running on port 5000.\", // Changed from 5001 to 5000\r\n  sender: 'bot',\r\n  timestamp: new Date(),\r\n  type: 'error',\r\n  provider: 'error'\r\n};\r\n\r\n      setMessages(prev => [...prev, errorMessage]);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Send message to AI backend\r\nconst sendToAI = async (messageText, searchResults = []) => {\r\n  try {\r\n    console.log(`ðŸ“¤ Sending to AI Backend: ${messageText} (provider: ${aiProvider})`);\r\n    \r\n    const response = await fetch('http://localhost:5001/api/ai/chat', {\r\n      method: 'POST',\r\n      headers: { \r\n        'Content-Type': 'application/json',\r\n        'Accept': 'application/json'\r\n      },\r\n      body: JSON.stringify({ \r\n        message: messageText,\r\n        provider: aiProvider, // Pass the selected provider\r\n        context: {\r\n          userName: 'User',\r\n          userLevel: 'beginner',\r\n          interests: []\r\n        }\r\n      })\r\n    });\r\n\r\n    console.log('ðŸ“¡ AI Backend response status:', response.status);\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP error! status: ${response.status}`);\r\n    }\r\n    \r\n    const data = await response.json();\r\n    console.log('âœ… Raw API Response:', data);\r\n    \r\n    if (data.success) {\r\n      // Check if it's still the generic greeting (just in case)\r\n      if (data.response.includes(\"Hello! I'm ready to help you learn\")) {\r\n        console.log('âš ï¸ Got generic greeting, using fallback instead');\r\n        return {\r\n          text: generateSpecificResponse(messageText),\r\n          provider: data.provider || 'ai',\r\n          suggestions: data.suggestions || generateFollowUpQuestions(messageText, searchResults),\r\n          data: data.data || null\r\n        };\r\n      }\r\n      \r\n      // Return the actual AI response\r\n      return {\r\n        text: data.response,\r\n        provider: data.provider || 'ai',\r\n        suggestions: data.suggestions || generateFollowUpQuestions(messageText, searchResults),\r\n        data: data.data || null\r\n      };\r\n    } else {\r\n      throw new Error(data.error || 'AI chat failed');\r\n    }\r\n  } catch (error) {\r\n    console.error('âŒ AI call error:', error);\r\n    // Return fallback response\r\n    return {\r\n      text: generateSpecificResponse(messageText),\r\n      provider: 'error',\r\n      suggestions: generateFollowUpQuestions(messageText, searchResults)\r\n    };\r\n  }\r\n};\r\n\r\n// Add this helper function\r\nconst generateSpecificResponse = (query) => {\r\n  const lower = query.toLowerCase();\r\n  if (lower.includes('react')) {\r\n    return \"React is a JavaScript library for building user interfaces, developed by Facebook. It uses a component-based architecture and virtual DOM for efficient updates. Would you like to know more about React hooks or components?\";\r\n  }\r\n  if (lower.includes('python')) {\r\n    return \"Python is a versatile programming language used for web development, data science, AI, and automation. It's known for its simple syntax and large ecosystem. Are you interested in Python for web development or data science?\";\r\n  }\r\n  if (lower.includes('data science')) {\r\n    return \"Data science involves analyzing data to extract insights. It combines statistics, programming, and domain knowledge. The typical path includes learning Python, statistics, machine learning, and data visualization. Would you like course recommendations?\";\r\n  }\r\n  return \"I can help you with learning topics, course recommendations, and career guidance. What specific topic would you like to learn about?\";\r\n};\r\n\r\n\r\n\r\n  // Generate follow-up questions based on context\r\n  const generateFollowUpQuestions = (query, searchResults = []) => {\r\n    const questions = [];\r\n    \r\n    if (searchResults.length > 0) {\r\n      questions.push(\r\n        `Tell me more about ${searchResults[0]?.title || 'this course'}`,\r\n        `What are the prerequisites for ${searchResults[0]?.title || 'this course'}?`,\r\n        `How do I enroll in ${searchResults[0]?.title || 'this course'}?`,\r\n        `What skills will I learn from ${searchResults[0]?.title || 'this course'}?`\r\n      );\r\n    } else {\r\n      questions.push(\r\n        \"What courses do you have for beginners?\",\r\n        \"Can you recommend web development courses?\",\r\n        \"How do I start learning data science?\",\r\n        \"What programming language should I learn first?\"\r\n      );\r\n    }\r\n    \r\n    return questions.slice(0, 3); // Return top 3 questions\r\n  };\r\n\r\n  // Test AI connection\r\nconst testAIConnection = async () => {\r\n  setIsLoading(true);\r\n  try {\r\n    const testMessage = {\r\n      id: Date.now(),\r\n      text: \"Testing AI connection...\",\r\n      sender: 'bot',\r\n      timestamp: new Date(),\r\n      type: 'test'\r\n    };\r\n    setMessages(prev => [...prev, testMessage]);\r\n\r\n    // Test actual AI response\r\n    const response = await fetch('http://localhost:5001/api/ai/chat', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ \r\n        message: 'Hello, are you working? Say yes if you are.',\r\n        provider: aiProvider \r\n      })\r\n    });\r\n    \r\n    const data = await response.json();\r\n    \r\n    if (data.success) {\r\n      const successMessage = {\r\n        id: Date.now() + 1,\r\n        text: `âœ… AI Connection Successful! Using ${data.provider || 'unknown'} provider.\\nResponse: \"${data.response}\"`,\r\n        sender: 'bot',\r\n        timestamp: new Date(),\r\n        type: 'success',\r\n        provider: data.provider || 'ai'\r\n      };\r\n      setMessages(prev => [...prev, successMessage]);\r\n    } else {\r\n      throw new Error('AI test failed');\r\n    }\r\n  } catch (error) {\r\n    console.error('Test failed:', error);\r\n    const errorMessage = {\r\n      id: Date.now() + 1,\r\n      text: \"âŒ AI Connection Failed. Please check backend logs.\",\r\n      sender: 'bot',\r\n      timestamp: new Date(),\r\n      type: 'error'\r\n    };\r\n    setMessages(prev => [...prev, errorMessage]);\r\n  } finally {\r\n    setIsLoading(false);\r\n  }\r\n};\r\n\r\n  // Handle quick starter click\r\n  const handleStarterClick = (starter) => {\r\n    setInput(starter);\r\n    setTimeout(() => {\r\n      sendMessage(starter);\r\n    }, 100);\r\n  };\r\n\r\n  // Handle key press\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  // Scroll to bottom\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  // Clear conversation\r\n  const clearConversation = () => {\r\n    setMessages(initialMessages);\r\n    setSearchResults([]);\r\n  };\r\n\r\n  // Format time\r\n  const formatTime = (date) => {\r\n    return date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  };\r\n\r\n  // Toggle chat window\r\n  const toggleChat = () => {\r\n    setIsOpen(!isOpen);\r\n  };\r\n\r\n  // Change AI provider\r\n  const changeProvider = (provider) => {\r\n    setAiProvider(provider);\r\n    const providerMessage = {\r\n      id: Date.now(),\r\n      text: `Switched to ${provider.toUpperCase()} AI provider`,\r\n      sender: 'bot',\r\n      timestamp: new Date(),\r\n      type: 'info'\r\n    };\r\n    setMessages(prev => [...prev, providerMessage]);\r\n  };\r\n\r\n  // Render message with formatting\r\n  const renderMessage = (message) => {\r\n    const isBot = message.sender === 'bot';\r\n    \r\n    return (\r\n      <div className={`message-container ${isBot ? 'bot-message' : 'user-message'}`} key={message.id}>\r\n        <div className=\"message-header\">\r\n          <div className=\"message-sender\">\r\n            {isBot ? (\r\n              <>\r\n                <span className=\"bot-icon\">ðŸ¤–</span>\r\n                <span className=\"sender-name\">\r\n                  AI Assistant {message.provider && message.provider !== 'ai' && `â€¢ ${message.provider.toUpperCase()}`}\r\n                </span>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <span className=\"user-icon\">ðŸ‘¤</span>\r\n                <span className=\"sender-name\">You</span>\r\n              </>\r\n            )}\r\n          </div>\r\n          <div className=\"message-time\">{formatTime(new Date(message.timestamp))}</div>\r\n        </div>\r\n        \r\n        <div className={`message-bubble ${isBot ? 'bot-bubble' : 'user-bubble'}`}>\r\n          <div className=\"message-text\">\r\n            {message.text.split('\\n').map((line, i) => (\r\n              <React.Fragment key={i}>\r\n                {line}\r\n                {i < message.text.split('\\n').length - 1 && <br />}\r\n              </React.Fragment>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Suggestions for bot messages */}\r\n        {isBot && message.suggestions && message.suggestions.length > 0 && (\r\n          <div className=\"message-suggestions\">\r\n            <small className=\"suggestions-label\">Quick follow-ups:</small>\r\n            <div className=\"suggestions-buttons\">\r\n              {message.suggestions.map((suggestion, index) => (\r\n                <button\r\n                  key={index}\r\n                  className=\"suggestion-btn\"\r\n                  onClick={() => handleStarterClick(suggestion)}\r\n                  disabled={isLoading}\r\n                >\r\n                  {suggestion}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render search results\r\n  const renderSearchResults = () => {\r\n    if (searchResults.length === 0) return null;\r\n\r\n    return (\r\n      <div className=\"search-results-section\">\r\n        <div className=\"search-results-header\">\r\n          <h5 className=\"search-results-title\">ðŸ” Search Results ({searchResults.length})</h5>\r\n          <small className=\"text-muted\">Courses matching your query</small>\r\n        </div>\r\n        \r\n        <div className=\"search-results-grid\">\r\n          {searchResults.map((result, index) => (\r\n            <div className=\"search-result-card\" key={index}>\r\n              <div className=\"search-result-header\">\r\n                <h6 className=\"search-result-title\">{result.title}</h6>\r\n                <span className=\"search-result-badge\">{result.category}</span>\r\n              </div>\r\n              <p className=\"search-result-description\">{result.description}</p>\r\n              <div className=\"search-result-footer\">\r\n                <div className=\"search-result-meta\">\r\n                  <span className=\"search-result-meta-item\">\r\n                    <i className=\"fas fa-user\"></i> {result.instructor}\r\n                  </span>\r\n                  <span className=\"search-result-meta-item\">\r\n                    <i className=\"fas fa-graduation-cap\"></i> {result.level}\r\n                  </span>\r\n                  {result.rating && (\r\n                    <span className=\"search-result-meta-item\">\r\n                      <i className=\"fas fa-star\"></i> {result.rating}\r\n                    </span>\r\n                  )}\r\n                  {result.enrolledStudents > 0 && (\r\n                    <span className=\"search-result-meta-item\">\r\n                      <i className=\"fas fa-users\"></i> {result.enrolledStudents}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                <button \r\n                  className=\"search-result-action-btn\"\r\n                  onClick={() => handleStarterClick(`Tell me more about ${result.title}`)}\r\n                >\r\n                  Learn More\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render search hints\r\n  const renderSearchHints = () => {\r\n    if (searchHints.length === 0) return null;\r\n\r\n    return (\r\n      <div className=\"search-hints-section\">\r\n        <h5 className=\"search-hints-title\">ðŸ’¡ Search for courses about:</h5>\r\n        <div className=\"search-hints-grid\">\r\n          {searchHints.map((hint, index) => (\r\n            <button\r\n              key={index}\r\n              className=\"search-hint-card\"\r\n              onClick={() => handleStarterClick(`Find courses about ${hint}`)}\r\n              disabled={isLoading}\r\n            >\r\n              {hint}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Chatbot Toggle Button */}\r\n      <button\r\n        className=\"chatbot-toggle-btn\"\r\n        onClick={toggleChat}\r\n        title=\"AI Learning Assistant\"\r\n      >\r\n        {isOpen ? (\r\n          <span className=\"close-icon\">âœ•</span>\r\n        ) : (\r\n          <>\r\n            <span className=\"chat-icon\">ðŸ’¬</span>\r\n            <span className=\"notification-dot\"></span>\r\n          </>\r\n        )}\r\n      </button>\r\n\r\n      {/* Chat Window */}\r\n      {isOpen && (\r\n        <div className=\"chatbot-window\">\r\n          {/* Header */}\r\n          <div className=\"chat-header\">\r\n            <div className=\"chat-header-left\">\r\n              <div className=\"chat-avatar\">\r\n                <span className=\"avatar-icon\">ðŸ¤–</span>\r\n              </div>\r\n              <div className=\"chat-info\">\r\n                <h3 className=\"chat-title\">AI Learning Assistant</h3>\r\n                <div className=\"chat-status\">\r\n                  <span className=\"status-dot online\"></span>\r\n                  <span className=\"status-text\">\r\n                    Connected to Port 5001 â€¢ Provider: {aiProvider.toUpperCase()}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"chat-header-right\">\r\n              <div className=\"provider-selector\">\r\n                <select \r\n                  value={aiProvider}\r\n                  onChange={(e) => changeProvider(e.target.value)}\r\n                  className=\"form-select form-select-sm\"\r\n                  disabled={isLoading}\r\n                >\r\n                  <option value=\"auto\">ðŸ¤– Auto (Smart)</option>\r\n                  <option value=\"openai\">âš¡ OpenAI</option>\r\n                  <option value=\"gemini\">ðŸ”® Gemini</option>\r\n                  <option value=\"deepseek\">ðŸŒŠ DeepSeek</option>\r\n                </select>\r\n              </div>\r\n              <button \r\n                className=\"header-btn test-btn\"\r\n                onClick={testAIConnection}\r\n                title=\"Test AI Connection\"\r\n                disabled={isLoading}\r\n              >\r\n                <span className=\"btn-icon\">ðŸ”§</span>\r\n              </button>\r\n              <button \r\n                className=\"header-btn clear-btn\"\r\n                onClick={clearConversation}\r\n                title=\"Clear conversation\"\r\n                disabled={isLoading}\r\n              >\r\n                <span className=\"btn-icon\">ðŸ—‘ï¸</span>\r\n              </button>\r\n              <button \r\n                className=\"header-btn close-btn\"\r\n                onClick={() => setIsOpen(false)}\r\n                title=\"Close chat\"\r\n              >\r\n                <span className=\"btn-icon\">âœ•</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Chat Body */}\r\n          <div className=\"chat-body\" ref={chatContainerRef}>\r\n            {/* Welcome Message */}\r\n            <div className=\"welcome-section\">\r\n              <div className=\"welcome-card\">\r\n                <div className=\"welcome-icon\">ðŸ‘‹</div>\r\n                <h4 className=\"welcome-title\">How can I help you today?</h4>\r\n                <p className=\"welcome-text\">\r\n                  I'm connected to the AI backend on port 5001. Ask me about courses, programming, or learning advice!\r\n                </p>\r\n                <div className=\"welcome-actions\">\r\n                  <button \r\n                    className=\"btn btn-sm btn-primary\"\r\n                    onClick={testAIConnection}\r\n                    disabled={isLoading}\r\n                  >\r\n                    {isLoading ? 'Testing...' : 'Test Connection'}\r\n                  </button>\r\n                  <small className=\"text-muted ms-2\">\r\n                    Current provider: <strong>{aiProvider.toUpperCase()}</strong>\r\n                  </small>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Search Hints */}\r\n            {renderSearchHints()}\r\n\r\n            {/* Conversation Starters */}\r\n            {conversationStarters.length > 0 && (\r\n              <div className=\"starters-section\">\r\n                <h5 className=\"starters-title\">ðŸ’¡ Try asking:</h5>\r\n                <div className=\"starters-grid\">\r\n                  {conversationStarters.map((starter, index) => (\r\n                    <button\r\n                      key={index}\r\n                      className=\"starter-card\"\r\n                      onClick={() => handleStarterClick(starter)}\r\n                      disabled={isLoading}\r\n                    >\r\n                      {starter}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {/* Messages */}\r\n            <div className=\"messages-container\">\r\n              {messages.map(renderMessage)}\r\n              \r\n              {/* Search Results */}\r\n              {renderSearchResults()}\r\n              \r\n              {isLoading && (\r\n                <div className=\"typing-indicator\">\r\n                  <div className=\"typing-dots\">\r\n                    <div className=\"dot\"></div>\r\n                    <div className=\"dot\"></div>\r\n                    <div className=\"dot\"></div>\r\n                  </div>\r\n                  <span className=\"typing-text\">\r\n                    AI is thinking... Using {aiProvider.toUpperCase()}\r\n                  </span>\r\n                </div>\r\n              )}\r\n              <div ref={messagesEndRef} />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Chat Footer */}\r\n          <div className=\"chat-footer\">\r\n            <div className=\"input-container\">\r\n              <div className=\"input-wrapper\">\r\n                <textarea\r\n                  className=\"chat-input\"\r\n                  placeholder={`Ask me anything or search for courses...`}\r\n                  value={input}\r\n                  onChange={(e) => setInput(e.target.value)}\r\n                  onKeyPress={handleKeyPress}\r\n                  disabled={isLoading}\r\n                  rows=\"1\"\r\n                />\r\n                <div className=\"input-actions\">\r\n                  <button\r\n                    className=\"send-btn\"\r\n                    onClick={() => sendMessage()}\r\n                    disabled={isLoading || !input.trim()}\r\n                    title=\"Send message\"\r\n                  >\r\n                    {isLoading ? (\r\n                      <span className=\"spinner\"></span>\r\n                    ) : (\r\n                      <span className=\"send-icon\">âž¤</span>\r\n                    )}\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"input-hints\">\r\n                <small className=\"hint-text\">\r\n                    Press <kbd>Enter</kbd> to send â€¢ Current: {aiProvider.toUpperCase()} â€¢ Port: 5001\r\n                </small>\r\n                <small className=\"search-hint\">\r\n                  ðŸ’¡ Try: \"search for web development courses\" or \"find Python courses\"\r\n                </small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AIChatbot;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}