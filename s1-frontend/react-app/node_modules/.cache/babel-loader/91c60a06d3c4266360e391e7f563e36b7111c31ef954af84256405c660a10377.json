{"ast":null,"code":"const COURSES_API_URL = 'http://localhost:5001'; // AI LMS Backend\nconst SCHOOLS_API_URL = 'http://localhost:5000'; // MongoDB Analytics Backend\n\nclass ApiService {\n  // ========== AUTHENTICATION ==========\n\n  static async register(userData) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/api/register`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(userData)\n      });\n      const text = await response.text();\n      try {\n        return JSON.parse(text);\n      } catch {\n        console.error('Register returned non-JSON:', text);\n        return {\n          success: false,\n          error: 'Invalid response from server'\n        };\n      }\n    } catch (error) {\n      console.error('Registration error:', error);\n      return {\n        success: false,\n        error: 'Connection failed'\n      };\n    }\n  }\n  static async login(credentials) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/api/login`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(credentials)\n      });\n      const text = await response.text();\n      try {\n        return JSON.parse(text);\n      } catch {\n        console.error('Login returned non-JSON:', text);\n        return {\n          success: false,\n          error: 'Invalid response from server'\n        };\n      }\n    } catch (error) {\n      console.error('Login error:', error);\n      return {\n        success: false,\n        error: 'Connection failed'\n      };\n    }\n  }\n\n  // ========== COURSES (Port 5001) ==========\n  static async getCourses() {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/courses`);\n      const text = await response.text();\n      try {\n        const data = JSON.parse(text);\n        return Array.isArray(data.data) ? data.data : [];\n      } catch {\n        console.error('getCourses returned non-JSON:', text);\n        return [];\n      }\n    } catch (error) {\n      console.error('Error fetching courses:', error);\n      return [];\n    }\n  }\n  static async getCourseById(id) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/courses/${id}`);\n      const text = await response.text();\n      try {\n        const data = JSON.parse(text);\n        return data.success ? data.data : null;\n      } catch {\n        console.error('getCourseById returned non-JSON:', text);\n        return null;\n      }\n    } catch (error) {\n      console.error('Error fetching course:', error);\n      return null;\n    }\n  }\n  static async enrollCourse(userId, courseId) {\n    try {\n      const response = await fetch(`${COURSES_API_URL}/enroll`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          userId,\n          courseId\n        })\n      });\n      const text = await response.text();\n      try {\n        return JSON.parse(text);\n      } catch {\n        console.error('enrollCourse returned non-JSON:', text);\n        return {\n          success: false,\n          error: 'Invalid response from server'\n        };\n      }\n    } catch (error) {\n      console.error('Error enrolling:', error);\n      return {\n        success: false,\n        error: 'Enrollment failed'\n      };\n    }\n  }\n\n  // ========== Other methods remain the same, but add safe JSON parsing for all fetch responses ==========\n\n  // Example:\n  static async getStats() {\n    try {\n      const response = await fetch(`${SCHOOLS_API_URL}/api/stats`);\n      const text = await response.text();\n      try {\n        return JSON.parse(text);\n      } catch {\n        console.error('getStats returned non-JSON:', text);\n        return {\n          success: false,\n          data: {\n            users: 0,\n            courses: 0,\n            enrollments: 0\n          }\n        };\n      }\n    } catch (error) {\n      console.error('Stats error:', error);\n      return {\n        success: false,\n        data: {\n          users: 0,\n          courses: 0,\n          enrollments: 0\n        }\n      };\n    }\n  }\n}\nexport default ApiService;","map":{"version":3,"names":["COURSES_API_URL","SCHOOLS_API_URL","ApiService","register","userData","response","fetch","method","headers","body","JSON","stringify","text","parse","console","error","success","login","credentials","getCourses","data","Array","isArray","getCourseById","id","enrollCourse","userId","courseId","getStats","users","courses","enrollments"],"sources":["G:/Capstone2025/capstone-project-sk/s1-frontend/react-app/src/services/api.js"],"sourcesContent":["const COURSES_API_URL = 'http://localhost:5001';  // AI LMS Backend\r\nconst SCHOOLS_API_URL = 'http://localhost:5000';  // MongoDB Analytics Backend\r\n\r\nclass ApiService {\r\n\r\n  // ========== AUTHENTICATION ==========\r\n\r\n  static async register(userData) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/api/register`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(userData)\r\n      });\r\n\r\n      const text = await response.text();\r\n      try {\r\n        return JSON.parse(text);\r\n      } catch {\r\n        console.error('Register returned non-JSON:', text);\r\n        return { success: false, error: 'Invalid response from server' };\r\n      }\r\n    } catch (error) {\r\n      console.error('Registration error:', error);\r\n      return { success: false, error: 'Connection failed' };\r\n    }\r\n  }\r\n\r\n  static async login(credentials) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/api/login`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(credentials)\r\n      });\r\n\r\n      const text = await response.text();\r\n      try {\r\n        return JSON.parse(text);\r\n      } catch {\r\n        console.error('Login returned non-JSON:', text);\r\n        return { success: false, error: 'Invalid response from server' };\r\n      }\r\n    } catch (error) {\r\n      console.error('Login error:', error);\r\n      return { success: false, error: 'Connection failed' };\r\n    }\r\n  }\r\n\r\n  // ========== COURSES (Port 5001) ==========\r\n  static async getCourses() {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/courses`);\r\n      const text = await response.text();\r\n      try {\r\n        const data = JSON.parse(text);\r\n        return Array.isArray(data.data) ? data.data : [];\r\n      } catch {\r\n        console.error('getCourses returned non-JSON:', text);\r\n        return [];\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching courses:', error);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  static async getCourseById(id) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/courses/${id}`);\r\n      const text = await response.text();\r\n      try {\r\n        const data = JSON.parse(text);\r\n        return data.success ? data.data : null;\r\n      } catch {\r\n        console.error('getCourseById returned non-JSON:', text);\r\n        return null;\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching course:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  static async enrollCourse(userId, courseId) {\r\n    try {\r\n      const response = await fetch(`${COURSES_API_URL}/enroll`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ userId, courseId })\r\n      });\r\n      const text = await response.text();\r\n      try {\r\n        return JSON.parse(text);\r\n      } catch {\r\n        console.error('enrollCourse returned non-JSON:', text);\r\n        return { success: false, error: 'Invalid response from server' };\r\n      }\r\n    } catch (error) {\r\n      console.error('Error enrolling:', error);\r\n      return { success: false, error: 'Enrollment failed' };\r\n    }\r\n  }\r\n\r\n  // ========== Other methods remain the same, but add safe JSON parsing for all fetch responses ==========\r\n\r\n  // Example:\r\n  static async getStats() {\r\n    try {\r\n      const response = await fetch(`${SCHOOLS_API_URL}/api/stats`);\r\n      const text = await response.text();\r\n      try {\r\n        return JSON.parse(text);\r\n      } catch {\r\n        console.error('getStats returned non-JSON:', text);\r\n        return { success: false, data: { users: 0, courses: 0, enrollments: 0 } };\r\n      }\r\n    } catch (error) {\r\n      console.error('Stats error:', error);\r\n      return { success: false, data: { users: 0, courses: 0, enrollments: 0 } };\r\n    }\r\n  }\r\n}\r\n\r\nexport default ApiService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}